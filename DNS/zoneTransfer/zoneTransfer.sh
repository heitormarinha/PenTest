#!/bin/bash

echo -n "Type the domain:"
read domain

subdomainsGot="/home/heitor/Documents/PenTest/DNS/zoneTransfer/dnsList.txt"
zoneTransferFile="/home/heitor/Documents/PenTest/DNS/zoneTransfer/zoneTransferHandled.txt"
subdomainsGotForBruteForce="/home/heitor/Documents/PenTest/DNS/bruteForceDNS/subdomains.txt"
joinSubdomainsFiles="$subdomainsGot $subdomainsGotForBruteForce" 
subdomains="/home/heitor/Documents/PenTest/DNS/zoneTransfer/dnsList.txt"

host -t ns $domain | cut -d " " -f 4- | sed 's/.$//' > $subdomainsGot
cat $joinSubdomainsFiles | sort -u > $subdomains 

for subdomain in $(cat $subdomains);
do
    host -l $domain $subdomain > /dev/null
    if (( $? == 0  ))
    then
        echo "================================================" >> $zoneTransferFile
        host -l $domain $subdomain >> $zoneTransferFile
        echo "================================================" >> $zoneTransferFile
    fi

done
