#!/bin/python
from platform import python_branch
import sys

# Add the directory to sys.pah
sys.path.append('/home/heitor/Documents/PenTest/modules/python/')
import iteration
import python

#Get the domains with HTTP service.
with open(python.enumerationHostInfoFTPExtern) as fileObject:
    domains=fileObject.readlines()
    
#Doing the enumeration of all hosts with HTTP open and parsion all iteration requests.    
for domain in domains:
    #eGetting the domain or IP and port respectively.
    target=domain.split(" ")[0]
    port= domain.split(" ")[1].strip()
    #Instasiating a class to connect to server.
    EnumHTTP=iteration.Iteration(target, int(port))
    EnumHTTP.openConnection()
    EnumHTTP.connectToServer()

    #parsin iteration commands.
    for request in python.userNamesList:
        
        EnumHTTP.sendRequestSMTP(request)
    
    EnumHTTP.closeConnection()

