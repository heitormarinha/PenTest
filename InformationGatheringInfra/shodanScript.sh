#!/bin/bash

key="63CaUHbWkFdkvoKZKv9Ka1R4HYbZpyb8"

#Initalizing the shodan API.
shodan int $key

echo -n "type 1 to Handle the number of ocorrences in the specific country and port of a keyWord"
echo -n "type 2 to search the IP adress, Organization, port and hostnames about the specific country and port of a keyWord"
echo -n "type 3 to search for domain"
read input

case $input in

1)
    HowManyOcorrences
    ;;
2)
    SearchIPPortHostnamesCountryPortKeyword
    ;;
3)
    SearchForDomain
    ;;
esac

#Handle the input typed.
CollectInputPortCountryKeyword() {
    echo "type the country domain: "
    read TDL
    echo "type the port of host: "
    read port
    echo "type the keyWord: "
    read keyWord
}

#Launch the shodan API
HowManyOcorrences() {

    CollectInputPortCountryKeyword
    #How many hosts in country with this port  and with content keyWord.
    shodan count country:$TDL port:$port $keyWord
}

SearchIPPortHostnamesCountryPortKeyword() {
    CollectInputHowMany
    shodan search --fields ip_str,org,port,hostnames country:$TDL port:$port $keyWord
    ord
}

SearchForDomain() {
    echo -n "type the domain target: "
    read domain
    shodan domain $domain
}

<< advancedShodan
#Advanced nedd member account
AdvancedSearchAndSaveInFIle() {
    CollectInputPortCountryKeyword
    shodan download $keyWord port:$port $keyWord country:$TDL
}

ParseFileSaved() 
{
    shodan parse --fields ip_str,port,hostnames --separator , $keyWord
}
advancedShodan
